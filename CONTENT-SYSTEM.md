# üìñ –ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º—ã–º HTML —Ñ–∞–π–ª–æ–≤ –∏–∑ PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∏—Å—Ç–æ—Ä–∏–∏ –≤–µ—Ä—Å–∏–π –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

–≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç `cheerio`, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML —Ñ–∞–π–ª–æ–≤.

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ –ë–î

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü:

```bash
psql -d your_database_name < migrations/001_create_content_table.sql
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∫–ª–∏–µ–Ω—Ç:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ pgAdmin/DBeaver
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `migrations/001_create_content_table.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å

### –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∫–∞ HTML —Ñ–∞–π–ª–æ–≤ –≤ –ë–î

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å–µ—Ö HTML —Ñ–∞–π–ª–æ–≤:

```bash
npm run init-content
```

**–í—ã–≤–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ—Ö–æ–∂ –Ω–∞:**
```
üîÑ –ù–∞—á–∏–Ω–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü...
‚úì –¢–∞–±–ª–∏—Ü–∞ page_content –Ω–∞–π–¥–µ–Ω–∞
‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: index (15423 —Å–∏–º–≤–æ–ª–æ–≤)
‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: rules (8234 —Å–∏–º–≤–æ–ª–æ–≤)
‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: rules-glossary (9876 —Å–∏–º–≤–æ–ª–æ–≤)
‚úì –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
üìä –í—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –ë–î: 6
```

### –®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º `</body>` –Ω–∞ –≤—Å–µ—Ö HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö:

```html
<script src="/content-manager.js"></script>
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫

```bash
---

## 1Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø) ‚úì

```http
GET /api/content/:pageName
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl http://localhost:3000/api/content/rules-glossary
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "page_name": "rules-glossary",
    "title": "–ì–ª–æ—Å—Å–∞—Ä–∏–π - EmbroMine",
    "content": "<!DOCTYPE html>...",
    "version": 1
  }
}
```

**–û—à–∏–±–∫–∞ (404):**
```json
{
  "error": "–ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –Ω–∞–π–¥–µ–Ω"
}
```

---

### 2Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤–µ—Ä—Å–∏–π (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã) üîí

```http
GET /api/content/:pageName/history
Authorization: Bearer <token>
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:3000/api/content/rules-glossary/history
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "id": 5,
      "version": 1,
      "created_at": "2025-02-24T10:30:45.123Z",
      "created_by": "admin_user"
    },
    {
      "id": 4,
      "version": 2,
      "created_at": "2025-02-24T11:15:22.456Z",
      "created_by": "editor_user"
    }
  ]
}
```

---

### 3Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã) üîí

```http
PUT /api/content/:pageName
Authorization: Bearer <token>
Content-Type: application/json

{
  "title": "–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫",
  "content": "<html>...</html>"
}
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -X PUT \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"title":"–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫","content":"<h1>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ</h1>"}' \
  http://localhost:3000/api/content/rules-glossary
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200):**
```json
{
  "success": true,
  "message": "–ö–æ–Ω—Ç–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω",
  "data": {
    "id": 1,
    "page_name": "rules-glossary",
    "title": "–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫",
    "content": "<h1>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ</h1>",
    "version": 2,
    "updated_at": "2025-02-24T12:00:00.000Z"
  }
}
```

---

### 4Ô∏è‚É£ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã) üîí

```http
POST /api/content/page
Authorization: Bearer <token>
Content-Type: application/json

---

## üíª –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –ù–ê –§–†–û–ù–¢–ï–ù–î–ï

### üéØ –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –¥–æ–±–∞–≤—å—Ç–µ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –ø–µ—Ä–µ–¥ `</body>`:

```html
<!DOCTYPE html>
<html>
<body>
    <!-- –í–∞—à–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
    <main></main>
    
    <!-- –≠—Ç–∞ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ –ë–î! -->
    <script src="/content-manager.js"></script>
</body>
</html>
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úì –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ URL
- ‚úì –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ API
- ‚úì –ó–∞–º–µ–Ω—è–µ—Ç—Å—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `<main>` –∏–ª–∏ `#dynamic-content`
- ‚úì –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`<title>`)
- ‚úì –ö–æ–Ω—Ç–µ–Ω—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

### üéØ –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–µ–Ω –±–æ–ª—å—à–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å:

```javascript
// –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
---

## üë®‚Äçüíº –î–õ–Ø –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–û–í

### üîê –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:

```html
<script src="/content-editor.js"></script>
```

### üìã –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

```javascript
const editor = new ContentEditor({ isAdmin: true });

const pages = await editor.getAllPages();
console.log(pages);
// –í—ã–≤–µ–¥–µ—Ç –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å –≤–µ—Ä—Å–∏—è–º–∏ –∏ –¥–∞—Ç–∞–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

### üìñ –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```javascript
const editor = new ContentEditor({ isAdmin: true });
const pageData = await editor.getPageForEditing('rules-glossary');

console.log(pageData.title);    // –ó–∞–≥–æ–ª–æ–≤–æ–∫
console.log(pageData.content);  // HTML –∫–æ–Ω—Ç–µ–Ω—Ç
console.log(pageData.version);  // –ù–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏
```

### üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç

```javascript
const editor = new ContentEditor({ isAdmin: true });

const result = await editor.savePageContent('rules-glossary', {
  title: '–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫',
  content: '<h1>–ù–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ</h1>'
});

if (result) {
  console.log('‚úì –ö–æ–Ω—Ç–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
}
```

### üìä –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤–µ—Ä—Å–∏–π

---

## üóÑÔ∏è –°–¢–†–£–ö–¢–£–†–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•

### –¢–∞–±–ª–∏—Ü–∞ `page_content` - –¢–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü

```sql
CREATE TABLE page_content (
    id SERIAL PRIMARY KEY,
    page_name VARCHAR(255) UNIQUE NOT NULL,  -- –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    title VARCHAR(500),                       -- –ó–∞–≥–æ–ª–æ–≤–æ–∫
    content TEXT NOT NULL,                    -- HTML –∫–æ–Ω—Ç–µ–Ω—Ç
    is_active BOOLEAN DEFAULT true,           -- –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    version INT DEFAULT 1,                    -- –ù–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,  -- –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,  -- –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    updated_by INT REFERENCES users(id)      -- ID —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
);
```

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|---------|
| `id` | SERIAL | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID |
| `page_name` | VARCHAR(255) | –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—É–Ω–∏–∫–∞–ª—å–Ω–æ) |
| `title` | VARCHAR(500) | –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è `<title>` —Ç–µ–≥–∞ |
| `content` | TEXT | HTML –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| `is_active` | BOOLEAN | –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ |
| `version` | INT | –ù–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ |
| `created_at` | TIMESTAMP | –ö–æ–≥–¥–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –∑–∞–ø–∏—Å—å |
| `updated_at` | TIMESTAMP | –ö–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ |
| `updated_by` | INT | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª |

### –¢–∞–±–ª–∏—Ü–∞ `page_content_history` - –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π
---

## üìù –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–æ–π

```html
<!DOCTYPE html>
<html>
<head>
    <title>–ü—Ä–∞–≤–∏–ª–∞</title>
</head>
<body>
    <nav><!-- –í–∞—à–µ –º–µ–Ω—é --></nav>
    
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —Å—é–¥–∞ –∏–∑ –ë–î -->
    <main id="content">
        <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </main>
    
    <!-- –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ –ë–î –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
    <script src="/content-manager.js"></script>
</body>
</html>
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∞—è –ø–∞–Ω–µ–ª—å

```html
<!DOCTYPE html>
<html>
<head>
    <title>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</title>
    <style>
        .pages-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        button { padding: 8px 16px; background: #5D8C30; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</h1>
    <div id="pages-list" class="pages-grid"></div>

    <script src="/content-editor.js"></script>
    <script>
        const editor = new ContentEditor({ isAdmin: true });

        async function loadPages() {
            const pages = await editor.getAllPages();
            
            document.getElementById('pages-list').innerHTML = pages.map(p => `
                <div style="border: 1px solid #ddd; padding: 15px;">
                    <h3>${p.page_name}</h3>
                    <p>–í–µ—Ä—Å–∏—è: ${p.version}</p>
                    <button onclick="editPage('${p.page_name}')">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
            `).join('');
        }

        async function editPage(pageName) {
            const data = await editor.getPageForEditing(pageName);
            const newContent = prompt('–ù–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç:', data.content.substring(0, 100));
            
            if (newContent) {
                await editor.savePageContent(pageName, {
                    title: data.title,
                    content: newContent
                });
                alert('‚úì –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!');
                loadPages();
            }
        }

        loadPages();
    </script>
</body>
</html>
```

### –ü—Ä–∏–º–µ—Ä 3: React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```javascript
import { useEffect, useState } from 'react';

function PageView({ pageName }) {
  const [data, setData] = useState(null);

  useEffect(() => {
    fetch(`/api/content/${pageName}`)
      .then(r => r.json())
      .then(res => {
        setData(res.data);
        document.title = res.data.title;
      });
  }, [pageName]);

  return data ? (
    <div>
      <h1>{data.title}</h1>
      <div dangerouslySetInnerHTML={{ __html: data.content }} />
    </div>
  ) : (
    <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  );
}

export default PageView;
```

### –ü—Ä–∏–º–µ—Ä 4: –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤

```javascript
async function adminEditPanel() {
  const editor = new ContentEditor({ isAdmin: true });
  
  // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  const pages = await editor.getAllPages();
  console.log('–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:', pages);
  
  // –í—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  const page = pages[0];
  const pageData = await editor.getPageForEditing(page.page_name);
  
  // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –∏—Å—Ç–æ—Ä–∏—é
  console.log('–¢–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç:', pageData.content);
  const history = await editor.getPageHistory(page.page_name);
  console.log('–ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π:', history);
  
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
  await editor.savePageContent(page.page_name, {
    title: '–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫',
    content: '<h1>–ù–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ</h1>'
  });
  
  console.log('‚úì –ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
}
```

---

## üêõ TROUBLESHOOTING

### ‚ùå "–¢–∞–±–ª–∏—Ü–∞ page_content –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
psql -d your_database < migrations/001_create_content_table.sql
```

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è SQL –±—ã–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∞.

---

### ‚ùå "–ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ"

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –æ—à–∏–±–∫–∏
2. –ß—Ç–æ —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω: `<script src="/content-manager.js"></script>`
3. –ß—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –ë–î: 
   ```sql
   SELECT * FROM page_content WHERE page_name = 'rules-glossary';
   ```
4. –ß—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å URL

---

### ‚ùå "cheerio is not defined"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
npm install cheerio
```

–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ `npm run init-content`.

---

### ‚ùå "401 Unauthorized –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏"

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- –ß—Ç–æ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ß—Ç–æ —Ç–æ–∫–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ localStorage: `localStorage.getItem('token')`
- –ß—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫ (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7 –¥–Ω–µ–π)
- –ß—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Ä–æ–ª—å `admin`

---

### ‚ùå "ECONNREFUSED –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î"

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ `.env`:
   ```env
   DATABASE_URL=postgresql://user:password@localhost:5432/dbname
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –ë–î

---

## üìà –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø

### üöÄ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

```javascript
// –ö–æ–Ω—Ç–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞
// –≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–æ—Å–µ—â–µ–Ω–∏–∏

// –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
pageContentManager.clearCache();
```

### üîç –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ë–î

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ page_name
-- –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
CREATE INDEX idx_page_content_name ON page_content(page_name);
```

### üìä –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∫–æ–Ω—Ç–µ–Ω—Ç —Ä–µ–¥–∫–æ –º–µ–Ω—è–µ—Ç—Å—è
- **–°–∂–∏–º–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- **–ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ HTML** - –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä = –±—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN** - –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ë–∞—Ç—á–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç —Ä–∞–∑–æ–º, –Ω–µ –ø–æ —á–∞—Å—Ç—è–º

---

## üöÄ –ë–£–î–£–©–ò–ï –£–õ–£–ß–®–ï–ù–ò–Ø

–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

- [ ] **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏** - –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏
- [ ] **WYSIWYG —Ä–µ–¥–∞–∫—Ç–æ—Ä** - –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ HTML
- [ ] **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤ (i18n)
- [ ] **–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** - –ø–æ–∏—Å–∫ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ —Å–ª–æ–≤–∞–º
- [ ] **–≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–æ–≤
- [ ] **Diff-–ø—Ä–æ—Å–º–æ—Ç—Ä** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏** - –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è
- [ ] **–ß–µ—Ä–Ω–æ–≤–∏–∫–∏** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤** - –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] **WebHooks** - –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

## üì¶ –§–ê–ô–õ–´ –ü–†–û–ï–ö–¢–ê

### Backend —Ñ–∞–π–ª—ã
- `routes/content.js` - API endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- `scripts/initialize-content.js` - –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∫–∏ HTML –≤ –ë–î
- `migrations/001_create_content_table.sql` - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î

### Frontend —Ñ–∞–π–ª—ã
- `public/content-manager.js` - –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (PageContentManager)
- `public/content-editor.js` - –†–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (ContentEditor)
- `public/content-manager-demo.html` - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `server.js` - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ `/api/content`
- `package.json` - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å cheerio –∏ —Å–∫—Ä–∏–ø—Ç init-content

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê –ò –°–ü–†–ê–í–ö–ê

### –ß—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞: F12 ‚Üí Console
   - –ö–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞: —Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥ `npm start`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î:**
   ```sql
   SELECT COUNT(*) as total FROM page_content;
   SELECT * FROM page_content LIMIT 5;
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   - `.env` —Ñ–∞–π–ª —Å `DATABASE_URL`
   - `server.js` - –ø–æ–¥–∫–ª—é—á–µ–Ω –ª–∏ –º–∞—Ä—à—Ä—É—Ç content
   - `package.json` - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ cheerio

4. **–°–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
   - [QUICKSTART.md](./QUICKSTART.md) - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - [API-DOCS.md](./API-DOCS.md) - —Å–ø—Ä–∞–≤–∫–∞ API
   - [EXAMPLES.md](./EXAMPLES.md) - –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## ‚ú® –†–ï–ó–Æ–ú–ï

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º **–ø–æ–ª–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º HTML —Å—Ç—Ä–∞–Ω–∏—Ü —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**, –Ω–µ –ø—Ä–∏–∫–∞—Å–∞—è—Å—å –∫ —Ñ–∞–π–ª–∞–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î —Å –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π –≤–µ—Ä—Å–∏–π.

**–ù–∞—á–Ω–∏—Ç–µ —Å–µ–π—á–∞—Å!** –°–ª–µ–¥—É–π—Ç–µ —Ä–∞–∑–¥–µ–ª—É "–ë–´–°–¢–†–´–ô –°–¢–ê–†–¢" –≤—ã—à–µ.min: true });

const success = await editor.deletePage('old-page');
if (success) {
  console.log('‚úì –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–¥–∞–ª–µ–Ω–∞!');
}
```

### üìå –û–ø—Ü–∏–∏ ContentEditor

```javascript
const editor = new ContentEditor({
  apiBaseUrl: '/api/content',    // –ë–∞–∑–æ–≤—ã–π URL API
  isAdmin: true                   // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
});

// –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
editor.getAllPages();                                 // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
editor.getPageForEditing('page-name');              // –ü–æ–ª—É—á–∏—Ç—å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
editor.savePageContent('page-name', {title, content}); // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
editor.getPageHistory('page-name');                  // –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π
editor.createPage('page-name', {title, content});    // –°–æ–∑–¥–∞—Ç—å
editor.deletePage('page-name');                      // –£–¥–∞–ª–∏—Ç—å
editor.enableInlineEditing('element-id', 'page-name'); // –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
import { ref, onMounted } from 'vue';

export default {
  setup() {
    const content = ref(null);
    const loading = ref(true);

    onMounted(async () => {
      const response = await fetch('/api/content/about');
      const data = await response.json();
      content.value = data.data.content;
      document.title = data.data.title;
      loading.value = false;
    });

    return { content, loading };
  }
}
```

---

### üìä –û–ø—Ü–∏–∏ PageContentManager

```javascript
const manager = new PageContentManager({
  apiBaseUrl: '/api/content',    // –ë–∞–∑–æ–≤—ã–π URL API
  cacheEnabled: true,             // –í–∫–ª—é—á–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
});

// –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
manager.init();                                              // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
manager.loadPageContent('page-name');                       // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
manager.loadContentIntoElement('element-id', 'page-name'); // –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ —ç–ª–µ–º–µ–Ω—Ç
manager.clearCache();                                       // –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
manager.getCachedContent('page-name');                     // –ü–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞

```http
GET /api/content/admin/all
Authorization: Bearer <token>
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:3000/api/content/admin/all
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "page_name": "index",
      "title": "–ì–ª–∞–≤–Ω–∞—è",
      "is_active": true,
      "version": 3,
      "updated_at": "2025-02-24T10:00:00.000Z"
    },
    {
      "id": 2,
      "page_name": "rules-glossary",
      "title": "–ì–ª–æ—Å—Å–∞—Ä–∏–π",
      "is_active": true,
      "version": 2,
      "updated_at": "2025-02-24T11:30:00.000Z"
    }
  ]
}
```

---

### 6Ô∏è‚É£ –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã) üîí

```http
DELETE /api/content/:pageName
Authorization: Bearer <token>
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -X DELETE \
  -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:3000/api/content/rules-glossary
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200):**
```json
{
  "success": true,
  "message": "–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞"
}
```

**–û—à–∏–±–∫–∞ (404):**
```json
{
  "error": "–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
```

---

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–î–ª—è –≤—Å–µ—Ö –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö endpoints —Ç—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω:

```http
Authorization: Bearer YOUR_JWT_TOKEN
```

–¢–æ–∫–µ–Ω –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ `/api/auth/login` endpoint.success": true,
  "data": {
    "id": 1,
    "page_name": "rules-glossary",
    "title": "–ì–ª–æ—Å—Å–∞—Ä–∏–π - EmbroMine",
    "content": "<!DOCTYPE html>...",
    "version": 1
  }
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã)
```http
PUT /api/content/:pageName
Authorization: Bearer <token>
Content-Type: application/json

{
  "title": "–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫",
  "content": "<html>...</html>"
}
```

### –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤–µ—Ä—Å–∏–π (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã)
```http
GET /api/content/:pageName/history
Authorization: Bearer <token>
```

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã)
```http
GET /api/content/admin/all
Authorization: Bearer <token>
```

### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã)
```http
POST /api/content/page
Authorization: Bearer <token>
Content-Type: application/json

{
  "pageName": "new-page",
  "title": "–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞",
  "content": "<html>...</html>"
}
```

### –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã)
```http
DELETE /api/content/:pageName
Authorization: Bearer <token>
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ–Ω–µ—Ü HTML —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º `</body>`:

```html
<script src="content-manager.js"></script>
```

`PageContentManager` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –ó–∞–≥—Ä—É–∑–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ –ë–î
3. –û–±–Ω–æ–≤–∏—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—Ç–µ–≥ `<title>`)
4. –ó–∞–º–µ–Ω–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`<main>`, `[role="main"]` –∏–ª–∏ `#dynamic-content`)

### –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```javascript
// –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
await pageContentManager.loadPageContent('rules-glossary');

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
await pageContentManager.loadContentIntoElement('my-container-id', 'rules-glossary');
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º

```javascript
// –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
pageContentManager.clearCache();

// –ü–æ–ª—É—á–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
const content = pageContentManager.getCachedContent('rules-glossary');
```

## üë®‚Äçüíº –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:

```html
<script src="content-editor.js"></script>
```

### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

```javascript
const contentEditor = new ContentEditor({ isAdmin: true });

const pages = await contentEditor.getAllPages();
console.log(pages);
```

### –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```javascript
const pageData = await contentEditor.getPageForEditing('rules-glossary');
console.log(pageData.content);
```

### –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç

```javascript
const result = await contentEditor.savePageContent('rules-glossary', {
  title: '–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫',
  content: '<html>...</html>'
});
```

### –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤–µ—Ä—Å–∏–π

```javascript
const history = await contentEditor.getPageHistory('rules-glossary');
console.log(history); // –í—Å–µ –≤–µ—Ä—Å–∏–∏ —Å –¥–∞—Ç–∞–º–∏ –∏ –∞–≤—Ç–æ—Ä–∞–º–∏
```

### –í–∫–ª—é—á–∏—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞

```javascript
contentEditor.enableInlineEditing('content-container', 'rules-glossary');
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `page_content`
| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|---------|
| `id` | SERIAL | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID |
| `page_name` | VARCHAR(255) | –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—É–Ω–∏–∫–∞–ª—å–Ω–æ) |
| `title` | VARCHAR(500) | –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| `content` | TEXT | HTML –∫–æ–Ω—Ç–µ–Ω—Ç |
| `is_active` | BOOLEAN | –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ |
| `version` | INT | –ù–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ |
| `created_at` | TIMESTAMP | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è |
| `updated_at` | TIMESTAMP | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| `updated_by` | INT | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ–±–Ω–æ–≤–∏–≤—à–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç |

### –¢–∞–±–ª–∏—Ü–∞ `page_content_history`
| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|---------|
| `id` | SERIAL | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID |
| `page_id` | INT | ID —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| `content_text` | TEXT | –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç |
| `version` | INT | –ù–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ |
| `created_at` | TIMESTAMP | –í—Ä–µ–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è |
| `created_by` | INT | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`PUT`, `POST`, `DELETE`) —Ç—Ä–µ–±—É—é—Ç:
  - **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** - —Ç–æ–∫–µ–Ω JWT –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization`
  - **–ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ä–æ–ª—å `admin`
  
- –û–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è (`GET`) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ **–ø—É–±–ª–∏—á–Ω—ã** - –Ω–µ —Ç—Ä–µ–±—É—é—Ç –≥–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```html
<!DOCTYPE html>
<html>
<head>
    <title>–ü—Ä–∞–≤–∏–ª–∞</title>
</head>
<body>
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —Å—é–¥–∞ -->
    <main id="content"></main>
    
    <script src="content-manager.js"></script>
</body>
</html>
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º

```html
<!DOCTYPE html>
<html>
<head>
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
</head>
<body>
    <div id="editor"></div>
    
    <script src="content-editor.js"></script>
    <script>
        const editor = new ContentEditor({ isAdmin: true });
        
        // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        editor.getAllPages().then(pages => {
            console.log('–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:', pages);
        });
    </script>
</body>
</html>
```

## üêõ Troubleshooting

### –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `page_content` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (`npm run init-content`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å filename

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ `public`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DATABASE_URL` —É–∫–∞–∑–∞–Ω–∞ –≤ `.env`

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –Ω–µ –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω JWT –≤ `localStorage.getItem('token')`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Ä–æ–ª—å `admin`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–æ–Ω—Ç–µ–Ω—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ò–Ω–¥–µ–∫—Å—ã**: –¢–∞–±–ª–∏—Ü–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ `page_name` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–ò—Å—Ç–æ—Ä–∏—è**: –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫–∞—Ç–∞

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –≤–µ—Ä—Å–∏–π
- [ ] –†–µ–¥–∞–∫—Ç–æ—Ä WYSIWYG
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (–º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å)
- [ ] –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- [ ] –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å diff-–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º
